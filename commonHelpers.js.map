{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport iconError from '../img/iconError.svg'\n\n\nconst inputElem = document.getElementById('datetime-picker')\nconst startBtnElem = document.querySelector('[data-start]')\nconst daysElem = document.querySelector('[data-days]')\nconst hoursElem = document.querySelector('[data-hours]')\nconst minutesElem = document.querySelector('[data-minutes]')\nconst secondsElem = document.querySelector('[data-seconds]')\n\nlet userSelectedDate = null;\n\nstartBtnElem.setAttribute('disabled', 'true')\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0] < Date.now()) {\n            startBtnElem.setAttribute('disabled', 'true')\n\n            iziToast.show({\n                message: 'Please choose a date in the future',\n                backgroundColor: 'red',\n                theme: 'dark',\n                iconUrl: iconError,\n                position: 'topRight',\n            })\n\n        } else {\n            userSelectedDate = selectedDates[0]\n            startBtnElem.removeAttribute('disabled')\n\n        }\n    },\n};\nflatpickr(inputElem, options);\n\nstartBtnElem.addEventListener('click', () => {\n\n    startBtnElem.setAttribute('disabled', 'true');\n    inputElem.disabled = true\n\n\n    const timer = setInterval(() => {\n\n        const diff = userSelectedDate - Date.now()\n        const { days, hours, minutes, seconds } = convertMs(diff);\n        \n        daysElem.textContent = addStatZero(days)\n        hoursElem.textContent = addStatZero(hours)\n        minutesElem.textContent = addStatZero(minutes)\n        secondsElem.textContent = addStatZero(seconds)\n\n        if (diff <= 0) {\n            clearInterval(timer)\n            startBtnElem.removeAttribute('disabled')\n            inputElem.disabled = false\n\n            daysElem.textContent = '00';\n            hoursElem.textContent = '00';\n            minutesElem.textContent = '00';\n            secondsElem.textContent = '00';\n        }\n    }, 1000)\n})\n\nfunction addStatZero(num) {\n    if (num >= 0 && num <= 9) {\n        return '0' + num\n    } else {\n        return num\n    }\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}"],"names":["inputElem","startBtnElem","daysElem","hoursElem","minutesElem","secondsElem","userSelectedDate","options","selectedDates","iziToast","iconError","flatpickr","timer","diff","days","hours","minutes","seconds","convertMs","addStatZero","num","ms"],"mappings":"8IASA,MAAMA,EAAY,SAAS,eAAe,iBAAiB,EACrDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAmB,KAEvBL,EAAa,aAAa,WAAY,MAAM,EAE5C,MAAMM,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,CAAC,EAAI,KAAK,IAAG,GAC3BP,EAAa,aAAa,WAAY,MAAM,EAE5CQ,EAAS,KAAK,CACV,QAAS,qCACT,gBAAiB,MACjB,MAAO,OACP,QAASC,EACT,SAAU,UAC1B,CAAa,IAGDJ,EAAmBE,EAAc,CAAC,EAClCP,EAAa,gBAAgB,UAAU,EAG9C,CACL,EACAU,EAAUX,EAAWO,CAAO,EAE5BN,EAAa,iBAAiB,QAAS,IAAM,CAEzCA,EAAa,aAAa,WAAY,MAAM,EAC5CD,EAAU,SAAW,GAGrB,MAAMY,EAAQ,YAAY,IAAM,CAE5B,MAAMC,EAAOP,EAAmB,KAAK,IAAK,EACpC,CAAE,KAAAQ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EAExDX,EAAS,YAAciB,EAAYL,CAAI,EACvCX,EAAU,YAAcgB,EAAYJ,CAAK,EACzCX,EAAY,YAAce,EAAYH,CAAO,EAC7CX,EAAY,YAAcc,EAAYF,CAAO,EAEzCJ,GAAQ,IACR,cAAcD,CAAK,EACnBX,EAAa,gBAAgB,UAAU,EACvCD,EAAU,SAAW,GAErBE,EAAS,YAAc,KACvBC,EAAU,YAAc,KACxBC,EAAY,YAAc,KAC1BC,EAAY,YAAc,KAEjC,EAAE,GAAI,CACX,CAAC,EAED,SAASc,EAAYC,EAAK,CACtB,OAAIA,GAAO,GAAKA,GAAO,EACZ,IAAMA,EAENA,CAEf,CAEA,SAASF,EAAUG,EAAI,CAQnB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}